
<!-- Top Navbar -->
<header class="navbar">
  <div class="navbar-left">
    <button class="menu-toggle" (click)="toggleSidebar()" [class.active]="sidebarCollapsed">
      <i class="fas fa-bars"></i>
    </button>
    <div class="logo">
      <i class="fas fa-bolt logo-icon"></i>
      <div class="logo-text">
        <span class="brand-name">ElectroMap</span>
        <span class="slogan">Find. Charge. Go</span>
      </div>
    </div>
  </div>
  
  <div class="navbar-center">
    <div class="search-container">
      <i class="fas fa-search search-icon"></i>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Rechercher une borne ou un utilisateur…"
        [(ngModel)]="searchQuery"
        (input)="onSearch($event)"
      >
    </div>
  </div>
  
  <div class="navbar-right">
    <div class="theme-toggle" (click)="toggleTheme()">
      <i [class]="darkMode ? 'fas fa-sun' : 'fas fa-moon'"></i>
    </div>
    
    <div class="notification-container" (click)="toggleNotifications()">
      <i class="fas fa-bell notification-icon" [class.active]="showNotifications"></i>
      <span class="notification-badge" *ngIf="notificationCount > 0">{{notificationCount}}</span>
      
      <!-- Notifications Dropdown -->
      <div class="notifications-dropdown" [class.show]="showNotifications">
        <div class="notifications-header">
          <h4>Notifications</h4>
          <button (click)="markAllAsRead()">Tout marquer comme lu</button>
        </div>
        <div class="notifications-list">
          <div class="notification-item" *ngFor="let notification of notifications" [class.unread]="!notification.read">
            <div class="notification-icon" [ngClass]="notification.type">
              <i [class]="notification.icon"></i>
            </div>
            <div class="notification-content">
              <p class="notification-title">{{notification.title}}</p>
              <p class="notification-message">{{notification.message}}</p>
              <p class="notification-time">{{notification.time}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="profile-container" (click)="toggleProfileDropdown()">
      <div class="profile-avatar">
        <img 
          [src]="userProfile.avatar" 
          [alt]="userProfile.name"
          class="avatar-img"
        >
        <div class="status-indicator" [class.online]="userProfile.isOnline"></div>
      </div>
      
      <div class="profile-dropdown" [class.show]="showProfileDropdown">
        <div class="profile-info">
          <img [src]="userProfile.avatar" [alt]="userProfile.name">
          <div>
            <h4>{{userProfile.name}}</h4>
            <p>{{userProfile.role}}</p>
          </div>
        </div>
        <div class="dropdown-divider"></div>
        <div class="dropdown-item" (click)="navigateTo('/profile')">
          <i class="fas fa-user"></i>
          <span>Mon Profil</span>
        </div>
        <div class="dropdown-item" (click)="navigateTo('/settings')">
          <i class="fas fa-cog"></i>
          <span>Paramètres</span>
        </div>
        <div class="dropdown-item" (click)="navigateTo('/help')">
          <i class="fas fa-question-circle"></i>
          <span>Aide & Support</span>
        </div>
        <div class="dropdown-divider"></div>
        <div class="dropdown-item logout" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Déconnexion</span>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Sidebar -->
<aside class="sidebar" [class.collapsed]="sidebarCollapsed" [class.dark]="darkMode">
  <nav class="sidebar-nav">
    <div class="nav-group">
      <div class="nav-group-title" *ngIf="!sidebarCollapsed">Principal</div>
      
      <div class="nav-item" 
           [class.active]="activeRoute === 'dashboard'" 
           (click)="navigateTo('/admin')">
        <i class="fas fa-chart-bar nav-icon"></i>
        <span class="nav-text">Dashboard</span>
        <div class="nav-indicator"></div>
      </div>
      
      <div class="nav-item" 
           [class.active]="activeRoute === 'map'" 
           (click)="navigateTo('/map')">
        <i class="fas fa-map nav-icon"></i>
        <span class="nav-text">Carte Interactive</span>
        <div class="nav-indicator"></div>
      </div>
    </div>

    <div class="nav-group">
      <div class="nav-group-title" *ngIf="!sidebarCollapsed">Gestion</div>
      
      <div class="nav-item" 
           [class.active]="activeRoute === 'stations'" 
           (click)="navigateTo('/stations')">
        <i class="fas fa-charging-station nav-icon"></i>
        <span class="nav-text">Bornes de Charge</span>
        <span class="nav-badge" *ngIf="stationsCount">{{stationsCount}}</span>
        <div class="nav-indicator"></div>
      </div>
      
      <div class="nav-item" 
     [class.active]="activeRoute === 'user_list'" 
     (click)="navigateTo('/user_list')">
  <i class="fas fa-users nav-icon"></i>
  <span class="nav-text">Utilisateurs</span>
  <span class="nav-badge" *ngIf="usersCount">{{ usersCount }}</span>
  <div class="nav-indicator"></div>
</div>
      
      <div class="nav-item" 
           [class.active]="activeRoute === 'reservations'" 
           (click)="navigateTo('/reservations')">
        <i class="fas fa-calendar-check nav-icon"></i>
        <span class="nav-text">Réservations</span>
        <div class="nav-indicator"></div>
      </div>
    </div>

    <div class="nav-group">
      <div class="nav-group-title" *ngIf="!sidebarCollapsed">Analyses</div>
      
      <div class="nav-item" 
           [class.active]="activeRoute === 'analytics'" 
           (click)="navigateTo('/analytics')">
        <i class="fas fa-chart-line nav-icon"></i>
        <span class="nav-text">Statistiques</span>
        <div class="nav-indicator"></div>
      </div>
      
      <div class="nav-item" 
           [class.active]="activeRoute === 'reports'" 
           (click)="navigateTo('/reports')">
        <i class="fas fa-file-alt nav-icon"></i>
        <span class="nav-text">Rapports</span>
        <div class="nav-indicator"></div>
      </div>
    </div>

    <div class="nav-group">
      <div class="nav-group-title" *ngIf="!sidebarCollapsed">Configuration</div>
      
      <div class="nav-item" 
           [class.active]="activeRoute === 'settings'" 
           (click)="navigateTo('/settings')">
        <i class="fas fa-cog nav-icon"></i>
        <span class="nav-text">Paramètres</span>
        <div class="nav-indicator"></div>
      </div>
    </div>

    <div class="nav-footer">
      <div class="nav-item logout-item" (click)="logout()">
        <i class="fas fa-door-open nav-icon"></i>
        <span class="nav-text">Déconnexion</span>
      </div>
    </div>
  </nav>
</aside>

<div id="map" style="height: 100vh; width: 100%;"></div>
