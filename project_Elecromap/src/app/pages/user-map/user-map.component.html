
<app-map class="map-only"></app-map>
 
   <!-- Top Navbar -->
  <header class="navbar">
    <div class="navbar-left">
      <button class="menu-toggle" (click)="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
      <div class="logo">
        <i class="fas fa-bolt logo-icon"></i>
        <div class="logo-text">
          <span class="brand-name">ElectroMap</span>
          <span class="slogan">Find. Charge. Go</span>
        </div>
      </div>
    </div>
    
    <div class="navbar-center">
      <div class="search-container">
        <i class="fas fa-map-marker-alt search-icon"></i>
        <input 
          type="text" 
          class="search-input" 
          placeholder="Rechercher une station de charge..."
          [(ngModel)]="searchTerm"
          (input)="onSearch()"
        >
        <button class="search-btn">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
    
    <div class="navbar-right">
      <div class="quick-actions">
        <button class="quick-action-btn" title="Mode sombre" (click)="toggleDarkMode()">
          <i class="fas fa-moon"></i>
        </button>
        <button class="quick-action-btn" title="Ma position" (click)="findMyLocation()">
          <i class="fas fa-location-arrow"></i>
        </button>
      </div>
      
      <div class="notification-container" (click)="toggleNotifications()">
        <i class="fas fa-bell notification-icon"></i>
        <span class="notification-badge" *ngIf="notificationCount > 0">{{notificationCount}}</span>
      </div>
      
      <div class="profile-container" (click)="toggleProfileDropdown()">
        <div class="profile-avatar">
          <img 
            [src]="userAvatar || 'https://ui-avatars.com/api/?name=' + userName + '&background=4285f4&color=fff&size=40'"
            [alt]="userName"
            class="avatar-img"
          >
          <div class="status-indicator online"></div>
        </div>
        <div class="profile-info">
          <span class="profile-name">{{userName}}</span>
          <span class="profile-status">{{userStatus}}</span>
        </div>
        <i class="fas fa-chevron-down dropdown-arrow"></i>
        
        <div class="profile-dropdown" [class.show]="showProfileDropdown">
          <div class="dropdown-item" (click)="navigateToProfile()">
            <i class="fas fa-user"></i>
            <span>Mon Profil</span>
          </div>
          <div class="dropdown-item" (click)="navigateToBookings()">
            <i class="fas fa-calendar-alt"></i>
            <span>Mes Réservations</span>
          </div>
          <div class="dropdown-item" (click)="navigateToPayments()">
            <i class="fas fa-credit-card"></i>
            <span>Moyens de Paiement</span>
          </div>
          <div class="dropdown-item" (click)="navigateToSettings()">
            <i class="fas fa-cog"></i>
            <span>Préférences</span>
          </div>
          <div class="dropdown-divider"></div>
          <div class="dropdown-item logout" (click)="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Déconnexion</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="sidebarCollapsed">
    <nav class="sidebar-nav">
      <div class="nav-section">
        <div class="nav-item" [class.active]="activeRoute === 'dashboard'" (click)="navigateTo('user')">
          <i class="fas fa-home nav-icon"></i>
          <span class="nav-text">Accueil</span>
        </div>
        
        <div class="nav-item" [class.active]="activeRoute === 'mapuser'" (click)="navigateTo('mapuser')">
  <i class="fas fa-map nav-icon"></i>
  <span class="nav-text">Carte Interactive</span>
</div>
        
        <div class="nav-item" [class.active]="activeRoute === 'stations'" (click)="navigateTo('AllStations')">
          <i class="fas fa-charging-station nav-icon"></i>
          <span class="nav-text">Stations Proches</span>
        </div>
        
        <!-- <div class="nav-item" [class.active]="activeRoute === 'favorites'" (click)="navigateTo('favorites')">
          <i class="fas fa-heart nav-icon"></i>
          <span class="nav-text">Mes Favoris</span>
          <span class="nav-badge" *ngIf="favoritesCount > 0">{{favoritesCount}}</span>
        </div> -->
      </div>
      
      <div class="nav-divider"></div>
      
      <div class="nav-section">
        <div class="nav-item" [class.active]="activeRoute === 'history'" (click)="navigateTo('history')">
          <i class="fas fa-history nav-icon"></i>
          <span class="nav-text">Historique</span>
        </div>
        
      <div class="nav-item" 
     [class.active]="activeRoute === 'bookings'" 
     (click)="navigateTo('mes-reservations')">
  <i class="fas fa-calendar-check nav-icon"></i>
  <span class="nav-text">Réservations</span>
  <span class="nav-badge warning" *ngIf="upcomingBookings > 0">{{upcomingBookings}}</span>
</div>

        
        <div class="nav-item" [class.active]="activeRoute === 'wallet'" (click)="navigateTo('wallet')">
          <i class="fas fa-wallet nav-icon"></i>
          <span class="nav-text">Portefeuille</span>
        </div>
      </div>
      
      <div class="nav-divider"></div>
      
      <div class="nav-section">
        <div class="nav-item" [class.active]="activeRoute === 'support'" (click)="navigateTo('support')">
          <i class="fas fa-life-ring nav-icon"></i>
          <span class="nav-text">Support</span>
        </div>
        
        <div class="nav-item" [class.active]="activeRoute === 'settings'" (click)="navigateTo('settings')">
          <i class="fas fa-cog nav-icon"></i>
          <span class="nav-text">Paramètres</span>
        </div>
      </div>
    </nav>
    
    <!-- Sidebar Footer -->
    <div class="sidebar-footer">
      <div class="user-stats">
        <div class="stat-item">
          <i class="fas fa-leaf stat-icon"></i>
          <div class="stat-content">
            <span class="stat-value">{{co2Saved}}kg</span>
            <span class="stat-label">CO₂ économisé</span>
          </div>
        </div>
      </div>
    </div>
  </aside>
