<div class="register-page">
  <div class="register-wrapper">
    <!-- Logo et titre -->
    <div class="register-header">
      <div class="logo">
        <i class="fas fa-bolt"></i>
        <span>ElectroMap</span>
      </div>
      <h2 class="register-title">Créer un compte</h2>
    </div>

    <!-- Formulaire -->
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <!-- Champs nom et prénom -->
      <div class="form-row">
        <div class="input-group">
          <div class="input-icon">
            <i class="fas fa-user"></i>
          </div>
          <input 
            formControlName="firstName" 
            placeholder=" " 
            type="text"
            class="form-input"
            autocomplete="given-name"
            required
          />
          <label class="input-label">Prénom</label>
          <div class="input-error" *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
            <i class="fas fa-exclamation-circle"></i>
            <span>Le prénom est requis</span>
          </div>
        </div>
        
        <div class="input-group">
          <div class="input-icon">
            <i class="fas fa-user"></i>
          </div>
          <input 
            formControlName="lastName" 
            placeholder=" " 
            type="text"
            class="form-input"
            autocomplete="family-name"
            required
          />
          <label class="input-label">Nom</label>
          <div class="input-error" *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
            <i class="fas fa-exclamation-circle"></i>
            <span>Le nom est requis</span>
          </div>
        </div>
      </div>

      <!-- Type de voiture -->
      <!-- Type de voiture -->
<div class="input-group">
  <div class="input-icon">
    <i class="fas fa-car"></i>
  </div>
  <select formControlName="carType" class="form-select" required>
    <option value="">-- Sélectionnez votre voiture --</option>
    <option *ngFor="let type of carTypes" [value]="type">{{ type }}</option>
  </select>
  <label class="select-label">Type de véhicule</label>
  <div class="input-error" *ngIf="registerForm.get('carType')?.invalid && registerForm.get('carType')?.touched">
    <i class="fas fa-exclamation-circle"></i>
    <span>Veuillez sélectionner votre véhicule</span>
  </div>
</div>


      <!-- Date de naissance -->
      <div class="input-group">
        <div class="input-icon">
          <i class="fas fa-calendar-alt"></i>
        </div>
        <input 
          formControlName="dateOfBirth" 
          placeholder=" " 
          type="date"
          class="form-input"
          autocomplete="bday"
          required
        />
        <label class="input-label">Date de naissance</label>
        <div class="input-error" *ngIf="registerForm.get('dateOfBirth')?.invalid && registerForm.get('dateOfBirth')?.touched">
          <i class="fas fa-exclamation-circle"></i>
          <span>La date de naissance est requise</span>
        </div>
      </div>

      <!-- Email -->
      <div class="input-group">
        <div class="input-icon">
          <i class="fas fa-envelope"></i>
        </div>
        <input 
          formControlName="email" 
          placeholder=" " 
          type="email"
          class="form-input"
          autocomplete="email"
          required
        />
        <label class="input-label">Adresse email</label>
        <div class="input-error" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          <i class="fas fa-exclamation-circle"></i>
          <span *ngIf="registerForm.get('email')?.errors?.['required']">L'email est requis</span>
          <span *ngIf="registerForm.get('email')?.errors?.['email']">Format d'email invalide</span>
        </div>
      </div>

      <!-- Numéro de téléphone -->
      <div class="input-group">
        <div class="input-icon">
          <i class="fas fa-phone"></i>
        </div>
        <input 
          formControlName="phone" 
          placeholder=" " 
          type="tel"
          class="form-input"
          autocomplete="tel"
        />
        <label class="input-label">Téléphone (optionnel)</label>
      </div>

      <div class="form-row">
  <!-- Mot de passe -->
  <div class="input-group">
    <div class="input-icon">
      <i class="fas fa-lock"></i>
    </div>
    <input 
      formControlName="password" 
      placeholder=" " 
      [type]="showPassword ? 'text' : 'password'"
      class="form-input"
      autocomplete="new-password"
      required
    />
    <label class="input-label">Mot de passe</label>
    <button type="button" class="password-toggle" (click)="togglePasswordVisibility()">
      <i class="fas" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
    </button>
    <div class="input-error" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
      <i class="fas fa-exclamation-circle"></i>
      <span>Le mot de passe doit contenir au moins 8 caractères</span>
    </div>
  </div>

  <!-- Confirmer mot de passe -->
  <div class="input-group">
    <div class="input-icon">
      <i class="fas fa-lock"></i>
    </div>
    <input 
      formControlName="confirmPassword" 
      placeholder=" " 
      [type]="showConfirmPassword ? 'text' : 'password'"
      class="form-input"
      autocomplete="new-password"
      required
    />
    <label class="input-label">Confirmer le mot de passe</label>
    <button type="button" class="password-toggle" (click)="toggleConfirmPasswordVisibility()">
      <i class="fas" [class.fa-eye]="!showConfirmPassword" [class.fa-eye-slash]="showConfirmPassword"></i>
    </button>
    <div class="input-error" *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">
      <i class="fas fa-exclamation-circle"></i>
      <span *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Veuillez confirmer votre mot de passe</span>
      <span *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']">Les mots de passe ne correspondent pas</span>
    </div>
  </div>
</div>


      <!-- Indicateur de force du mot de passe -->
      <div class="password-strength" *ngIf="registerForm.get('password')?.value">
        <div class="strength-bars">
          <div class="strength-bar" [class]="getPasswordStrengthClass(1)" [class.active]="passwordStrength >= 1"></div>
          <div class="strength-bar" [class]="getPasswordStrengthClass(2)" [class.active]="passwordStrength >= 2"></div>
          <div class="strength-bar" [class]="getPasswordStrengthClass(3)" [class.active]="passwordStrength >= 3"></div>
          <div class="strength-bar" [class]="getPasswordStrengthClass(4)" [class.active]="passwordStrength >= 4"></div>
        </div>
        <div class="strength-info">
          <span class="strength-text">{{ getPasswordStrengthText() }}</span>
          <div class="strength-tips" *ngIf="passwordStrength < 4">
            <small>
              <i class="fas fa-info-circle"></i>
              Utilisez majuscules, minuscules, chiffres et caractères spéciaux
            </small>
          </div>
        </div>
      </div>

    

      <!-- Conditions d'utilisation -->
      <div class="terms-section">
        <div class="checkbox-group required">
          <label class="checkbox-container">
            <input type="checkbox" formControlName="acceptTerms" required />
            <span class="checkmark"></span>
            <span class="checkbox-text">
              J'accepte les <a href="#" class="link" target="_blank">conditions d'utilisation</a> 
              et la <a href="#" class="link" target="_blank">politique de confidentialité</a> *
            </span>
          </label>
          <div class="input-error" *ngIf="registerForm.get('acceptTerms')?.invalid && registerForm.get('acceptTerms')?.touched">
            <i class="fas fa-exclamation-circle"></i>
            <span>Vous devez accepter les conditions d'utilisation</span>
          </div>
        </div>
      </div>

      <!-- Bouton d'inscription -->
      <button 
        type="submit" 
        class="submit-btn"
        [disabled]="registerForm.invalid || isLoading"
        [class.loading]="isLoading"
      >
        <span *ngIf="!isLoading" class="btn-content">
          <i class="fas fa-user-plus"></i>
          Créer mon compte
        </span>
        <span *ngIf="isLoading" class="loading-content">
          <i class="fas fa-spinner fa-spin"></i>
          Création en cours...
        </span>
      </button>

      <!-- Indication champs requis -->
      <div class="form-note">
        <i class="fas fa-info-circle"></i>
        <span>Les champs marqués d'un * sont obligatoires</span>
      </div>
    </form>

    <!-- Messages de succès/erreur -->
    <div class="message-container">
      <div *ngIf="successMessage" class="alert alert-success">
        <i class="fas fa-check-circle"></i>
        <div class="alert-content">
          <strong>Succès !</strong>
          <span>{{ successMessage }}</span>
        </div>
      </div>
      
      <div *ngIf="errorMessage" class="alert alert-error">
        <i class="fas fa-exclamation-triangle"></i>
        <div class="alert-content">
          <strong>Erreur</strong>
          <span>{{ errorMessage }}</span>
        </div>
      </div>
    </div>

    

    <!-- Lien vers connexion -->
    <div class="register-footer">
      <p class="login-link">
        Déjà un compte ? 
        <a routerLink="/login" class="link-primary">Se connecter</a>
      </p>
      
      <div class="footer-links">
        <a href="#" class="footer-link">Centre d'aide</a>
        <span class="separator">•</span>
        <a href="#" class="footer-link">Contact</a>
        <span class="separator">•</span>
        <a href="#" class="footer-link">À propos</a>
      </div>
    </div>
  </div>

  <!-- Décoration -->
  <div class="decoration-elements">
    <div class="circle circle-1"></div>
    <div class="circle circle-2"></div>
    <div class="circle circle-3"></div>
    <div class="floating-icon icon-1">
      <i class="fas fa-charging-station"></i>
    </div>
    <div class="floating-icon icon-2">
      <i class="fas fa-car-battery"></i>
    </div>
    <div class="floating-icon icon-3">
      <i class="fas fa-bolt"></i>
    </div>
  </div>
</div>